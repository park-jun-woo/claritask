# Claritask VSCode Extension GUI

> **ë²„ì „**: v0.0.4

## ë³€ê²½ì´ë ¥
| ë²„ì „ | ë‚ ì§œ | ë‚´ìš© |
|------|------|------|
| v0.0.4 | 2026-02-03 | Experts íƒ­ ì¶”ê°€, FileSystemWatcher ë™ê¸°í™” |
| v0.0.3 | 2026-02-03 | Execution Status ì„¹ì…˜ ì¶”ê°€ |
| v0.0.2 | 2026-02-03 | Project íƒ­ ì„¤ê³„ ì¶”ê°€ |
| v0.0.1 | 2026-02-03 | ìµœì´ˆ ì‘ì„± |

## ê°œìš”

`.clt` í™•ì¥ìì˜ SQLite ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ì„ VSCode ë‚´ì—ì„œ ì‹œê°ì ìœ¼ë¡œ í¸ì§‘í•˜ëŠ” GUI í™•ì¥ í”„ë¡œê·¸ë¨.

**ëª©í‘œ**: CLIì™€ GUIê°€ ë™ì¼í•œ DB íŒŒì¼ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³µìœ í•˜ë©° í¸ì§‘

---

## ì•„í‚¤í…ì²˜

### Phase 1: MVP (WAL + Polling)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Claude Code    â”‚         â”‚  VSCode GUI     â”‚
â”‚  (clari cli)    â”‚         â”‚  (Webview)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚
         â”‚ write                     â”‚ read (1ì´ˆ polling)
         â–¼                           â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚     db.clt (SQLite + WAL)       â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2: File Watcher

```
db.clt ë³€ê²½ ê°ì§€ (fs.watch)
    â†“
ì¦‰ì‹œ SQLite ì¬ì½ê¸°
    â†“
GUI ì—…ë°ì´íŠ¸
```

### Phase 3: Daemon (í–¥í›„)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLI     â”‚     â”‚   GUI    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚  WebSocket     â”‚
     â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   clari daemon          â”‚
â”‚   - SQLite ë‹¨ë… ì ‘ê·¼    â”‚
â”‚   - ë³€ê²½ ì‹œ broadcast   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Expert íŒŒì¼ ë™ê¸°í™” (FileSystemWatcher)

### ìë™ í™œì„±í™”

Extensionì€ `.claritask/db.clt` íŒŒì¼ì´ ìˆëŠ” ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ ìë™ í™œì„±í™”:

```json
// package.json
{
  "activationEvents": [
    "workspaceContains:.claritask/db.clt"
  ]
}
```

### FileSystemWatcher ì„¤ì •

Extension í™œì„±í™” ì‹œ Expert íŒŒì¼ ê°ì‹œ ì‹œì‘ (db.cltë¥¼ ì—´ì§€ ì•Šì•„ë„ ë™ì‘):

```typescript
// extension.ts
export function activate(context: vscode.ExtensionContext) {
    // Expert íŒŒì¼ ê°ì‹œ
    const expertWatcher = vscode.workspace.createFileSystemWatcher(
        '**/.claritask/experts/**/EXPERT.md'
    );

    // íŒŒì¼ ìˆ˜ì • ì‹œ â†’ DBì— ë°±ì—…
    expertWatcher.onDidChange(uri => {
        syncExpertToDB(uri);
    });

    // íŒŒì¼ ìƒì„± ì‹œ â†’ DBì— ë“±ë¡
    expertWatcher.onDidCreate(uri => {
        syncExpertToDB(uri);
    });

    // íŒŒì¼ ì‚­ì œ ì‹œ â†’ DB ë°±ì—…ì—ì„œ ë³µêµ¬
    expertWatcher.onDidDelete(uri => {
        restoreExpertFromDB(uri);
    });

    context.subscriptions.push(expertWatcher);
}
```

### ë™ê¸°í™” íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í‰ì†Œ ë™ì‘                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ EXPERT.md ìˆ˜ì • ê°ì§€                                     â”‚
â”‚     â†“                                                   â”‚
â”‚ íŒŒì¼ ì½ê¸° â†’ í•´ì‹œ ê³„ì‚°                                   â”‚
â”‚     â†“                                                   â”‚
â”‚ í•´ì‹œ ë³€ê²½ë¨? â†’ DB content ì»¬ëŸ¼ì— ë°±ì—…                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ íŒŒì¼ ì‚­ì œ ê°ì§€ ì‹œ                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DBì—ì„œ ë°±ì—…ëœ content ì¡°íšŒ                              â”‚
â”‚     â†“                                                   â”‚
â”‚ content ìˆìŒ? â†’ íŒŒì¼ ìë™ ë³µêµ¬ (ì¡°ìš©íˆ)                 â”‚
â”‚     â†“                                                   â”‚
â”‚ content ì—†ìŒ? â†’ í…œí”Œë¦¿ìœ¼ë¡œ ì¬ìƒì„±                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UIì—ì„œ ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì‹œ                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DB ë ˆì½”ë“œ ì‚­ì œ + .md íŒŒì¼ ì‚­ì œ (í´ë” í¬í•¨)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### DB ìŠ¤í‚¤ë§ˆ (Expert ë°±ì—…ìš©)

```sql
CREATE TABLE IF NOT EXISTS experts (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    version TEXT DEFAULT '1.0.0',
    domain TEXT DEFAULT '',
    language TEXT DEFAULT '',
    framework TEXT DEFAULT '',
    path TEXT NOT NULL,
    content TEXT DEFAULT '',       -- ë°±ì—…ìš©: EXPERT.md ì „ì²´ ë‚´ìš©
    content_hash TEXT DEFAULT '',  -- ë³€ê²½ ê°ì§€ìš© í•´ì‹œ
    created_at TEXT NOT NULL,
    updated_at TEXT NOT NULL       -- ë§ˆì§€ë§‰ ë™ê¸°í™” ì‹œê°„
);
```

### ë©”ì‹œì§€ í”„ë¡œí† ì½œ (Expert ê´€ë ¨)

**Webview â†’ Extension:**
```typescript
// Expert íŒŒì¼ ì—´ê¸° ìš”ì²­
{ type: 'openExpertFile', expertId: string }

// Expert í• ë‹¹
{ type: 'assignExpert', expertId: string }

// Expert í• ë‹¹ í•´ì œ
{ type: 'unassignExpert', expertId: string }

// Expert ìƒì„±
{ type: 'createExpert', expertId: string }

// Expert ì‚­ì œ
{ type: 'deleteExpert', expertId: string }
```

**Extension â†’ Webview:**
```typescript
// Expert ëª©ë¡ ì—…ë°ì´íŠ¸
{ type: 'expertsUpdated', experts: Expert[] }

// Expert íŒŒì¼ ì—´ê¸° ê²°ê³¼
{ type: 'expertFileOpened', expertId: string, success: boolean }
```

---

## íŒŒì¼ í™•ì¥ì

| í™•ì¥ì | ì„¤ëª… |
|--------|------|
| `.clt` | Claritask SQLite ë°ì´í„°ë² ì´ìŠ¤ |

**ê¸°ì¡´ ê²½ë¡œ ë³€ê²½:**
```
Before: .claritask/db
After:  .claritask/db.clt
```

VSCodeì—ì„œ `.clt` íŒŒì¼ ì—´ë©´ Custom Editorê°€ í™œì„±í™”ë¨.

---

## ê¸°ìˆ  ìŠ¤íƒ

### Extension Host (Node.js)
- TypeScript
- VSCode Extension API
- better-sqlite3 (ë™ê¸° SQLite ë°”ì¸ë”©)

### Webview (ë¸Œë¼ìš°ì €)
- React 18
- TypeScript
- TailwindCSS
- React Flow (ë“œë˜ê·¸ì•¤ë“œë¡­ ìº”ë²„ìŠ¤)
- @vscode/webview-ui-toolkit

---

## UI ë ˆì´ì•„ì›ƒ

### íƒ­ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Claritask: my-project                            [âŸ³]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Project]  [Features]  [Tasks]  [Experts]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

4ê°œì˜ ë©”ì¸ íƒ­ìœ¼ë¡œ êµ¬ì„±:
- **Project**: í”„ë¡œì íŠ¸ ì •ë³´, Context, Tech, Design ì¡°íšŒ/í¸ì§‘
- **Features**: Feature ëª©ë¡ ë° ê´€ë¦¬
- **Tasks**: Task ëª©ë¡ ë° Canvas ë·°
- **Experts**: Expert ëª©ë¡, ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ë·°, íŒŒì¼ í¸ì§‘

---

### Project íƒ­ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Project]  [Features]  [Tasks]                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€ Project Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ID:      claritask                                â”‚ â”‚
â”‚  â”‚  Name:    Claritask                                â”‚ â”‚
â”‚  â”‚  Status:  â— active                                 â”‚ â”‚
â”‚  â”‚  Created: 2026-02-03                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ Context â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[Edit]â”€â”€â” â”‚
â”‚  â”‚  Project Name:  Claritask                          â”‚ â”‚
â”‚  â”‚  Description:   AI ì—ì´ì „íŠ¸ë¥¼ ìœ„í•œ ì‘ì—… ê´€ë¦¬ CLI...  â”‚ â”‚
â”‚  â”‚  Target Users:  AI ì—ì´ì „íŠ¸, ê°œë°œì                 â”‚ â”‚
â”‚  â”‚  Deadline:      -                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ Tech Stack â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[Edit]â”€â”€â” â”‚
â”‚  â”‚  backend:   Go 1.21+                               â”‚ â”‚
â”‚  â”‚  frontend:  CLI (Cobra)                            â”‚ â”‚
â”‚  â”‚  database:  SQLite (mattn/go-sqlite3)              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ Design Decisions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[Edit]â”€â”€â” â”‚
â”‚  â”‚  architecture:  CLI Application                    â”‚ â”‚
â”‚  â”‚  auth_method:   None (ë¡œì»¬ ë„êµ¬)                    â”‚ â”‚
â”‚  â”‚  api_style:     JSON ì…ì¶œë ¥                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ Execution Status â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  42% (17/40)      â”‚  â”‚
â”‚  â”‚  Status:   â— Running                               â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  Recent Tasks:                                     â”‚  â”‚
â”‚  â”‚  âœ“ #15 user_table_sql    "í…Œì´ë¸” ìƒì„± ì™„ë£Œ"        â”‚  â”‚
â”‚  â”‚  âœ“ #16 user_model        "ëª¨ë¸ êµ¬í˜„ ì™„ë£Œ"          â”‚  â”‚
â”‚  â”‚  â— #17 auth_service      "JWT êµ¬í˜„ ì¤‘..."          â”‚  â”‚
â”‚  â”‚  â—‹ #18 login_endpoint    (pending)                 â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: Connected â”‚ Last sync: 2s ago â”‚ WAL mode: ON   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Project íƒ­ ì„¹ì…˜ êµ¬ì„±

| ì„¹ì…˜ | ë‚´ìš© | í¸ì§‘ |
|------|------|------|
| **Project Info** | id, name, status, created_at | ì½ê¸° ì „ìš© |
| **Context** | project_name, description, target_users, deadline | í¸ì§‘ ê°€ëŠ¥ |
| **Tech Stack** | backend, frontend, database + ì‚¬ìš©ì ì •ì˜ í•„ë“œ | í¸ì§‘ ê°€ëŠ¥ |
| **Design Decisions** | architecture, auth_method, api_style + ì‚¬ìš©ì ì •ì˜ í•„ë“œ | í¸ì§‘ ê°€ëŠ¥ |
| **Execution Status** | ì§„í–‰ë„, ì‹¤í–‰ ìƒíƒœ, ìµœê·¼ Task ë¡œê·¸ | ì½ê¸° ì „ìš© |

---

### Features íƒ­ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Project]  [Features]  [Tasks]                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚                                            â”‚
â”‚  Features  â”‚      Feature Detail                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€    â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚  â–¸ user_auth â”‚    Name: user_auth                       â”‚
â”‚  â–¸ blog_post â”‚    Status: active                        â”‚
â”‚  + Add...    â”‚    Description: ...                      â”‚
â”‚              â”‚                                          â”‚
â”‚              â”‚    â”Œâ”€ Spec â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚    â”‚ # User Authentication            â”‚  â”‚
â”‚              â”‚    â”‚ ...                              â”‚  â”‚
â”‚              â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                          â”‚
â”‚              â”‚    â”Œâ”€ FDL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚    â”‚ feature: user_auth               â”‚  â”‚
â”‚              â”‚    â”‚ ...                              â”‚  â”‚
â”‚              â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: Connected â”‚ Last sync: 2s ago â”‚ WAL mode: ON   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Tasks íƒ­ ë ˆì´ì•„ì›ƒ (ê¸°ì¡´)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Project]  [Features]  [Tasks]                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚                        â”‚                   â”‚
â”‚  Features  â”‚      Canvas            â”‚    Inspector      â”‚
â”‚  â”€â”€â”€â”€â”€â”€    â”‚      (ë“œë˜ê·¸ì•¤ë“œë¡­)     â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  â–¡ user_auth â”‚                      â”‚    Feature:       â”‚
â”‚    â”œ task1   â”‚   â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”   â”‚    - name         â”‚
â”‚    â”œ task2   â”‚   â”‚ T1  â”‚â†’â†’â”‚ T2  â”‚   â”‚    - spec         â”‚
â”‚    â”” task3   â”‚   â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜   â”‚    - status       â”‚
â”‚  â–¡ blog_post â”‚        â†“             â”‚                   â”‚
â”‚              â”‚   â”Œâ”€â”€â”€â”€â”€â”            â”‚    Task:          â”‚
â”‚              â”‚   â”‚ T3  â”‚            â”‚    - title        â”‚
â”‚              â”‚   â””â”€â”€â”€â”€â”€â”˜            â”‚    - content      â”‚
â”‚              â”‚                      â”‚    - skill        â”‚
â”‚              â”‚                      â”‚    - status       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: Connected â”‚ Last sync: 2s ago â”‚ WAL mode: ON   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### íŒ¨ë„ êµ¬ì„±

| íŒ¨ë„ | ê¸°ëŠ¥ |
|------|------|
| **Left: Tree View** | Feature/Task ê³„ì¸µ êµ¬ì¡° |
| **Center: Canvas** | Task ë…¸ë“œ ì‹œê°í™”, ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ Edge ì—°ê²° |
| **Right: Inspector** | ì„ íƒëœ í•­ëª© ì†ì„± í¸ì§‘ |
| **Bottom: Status Bar** | ë™ê¸°í™” ìƒíƒœ, WAL ëª¨ë“œ, ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ |

---

### Experts íƒ­ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Project]  [Features]  [Tasks]  [Experts]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Assigned Experts (2)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”§ backend-go-gin                          [Edit]  â”‚ â”‚
â”‚  â”‚    Backend Go GIN Developer                        â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ ## Role Definition                             â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ Go ì–¸ì–´ì™€ GIN í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•œ...            â”‚ â”‚ â”‚
â”‚  â”‚ â”‚                                                â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ ## Tech Stack                                  â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ - **Language**: Go 1.21+                       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ - **Framework**: GIN v1.9+                     â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ ...                                            â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                        [Unassign]  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ¨ frontend-react                          [Edit]  â”‚ â”‚
â”‚  â”‚    Frontend React Developer                        â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ (ë Œë”ë§ëœ ë§ˆí¬ë‹¤ìš´ ë‚´ìš©)                        â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                        [Unassign]  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                         â”‚
â”‚  Available Experts (1)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â˜ï¸ devops-k8s                              [Assign] â”‚ â”‚
â”‚  â”‚    DevOps Kubernetes Specialist                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  [+ Create New Expert]                                  â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: Connected â”‚ Last sync: 2s ago â”‚ WAL mode: ON   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Experts íƒ­ ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **ë§ˆí¬ë‹¤ìš´ ë Œë”ë§** | EXPERT.md ë‚´ìš©ì„ ë Œë”ë§ëœ í˜•íƒœë¡œ í‘œì‹œ (react-markdown) |
| **[Edit] ë²„íŠ¼** | VSCode ê¸°ë³¸ ì—ë””í„°ë¡œ EXPERT.md íŒŒì¼ ì—´ê¸° |
| **[Assign] ë²„íŠ¼** | Expertë¥¼ í˜„ì¬ í”„ë¡œì íŠ¸ì— í• ë‹¹ |
| **[Unassign] ë²„íŠ¼** | Expertë¥¼ í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œ í•´ì œ |
| **[+ Create New Expert]** | ìƒˆ Expert ìƒì„± (ID ì…ë ¥ â†’ í…œí”Œë¦¿ ìƒì„± â†’ íŒŒì¼ ì—´ê¸°) |

### Experts íƒ­ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
ExpertsPanel/
â”œâ”€â”€ ExpertsPanel.tsx       # Experts íƒ­ ë©”ì¸
â”œâ”€â”€ ExpertCard.tsx         # Expert ì¹´ë“œ (ë Œë”ë§ + ë²„íŠ¼)
â”œâ”€â”€ ExpertContent.tsx      # ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ì˜ì—­
â””â”€â”€ CreateExpertDialog.tsx # ìƒˆ Expert ìƒì„± ë‹¤ì´ì–¼ë¡œê·¸
```

### Expert ë°ì´í„° íƒ€ì…

```typescript
interface Expert {
  id: string;
  name: string;
  version: string;
  domain: string;
  language: string;
  framework: string;
  content: string;       // EXPERT.md ì „ì²´ ë‚´ìš©
  assigned: boolean;
  fileExists: boolean;   // íŒŒì¼ ì¡´ì¬ ì—¬ë¶€
}
```

---

## í•µì‹¬ ê¸°ëŠ¥

### 0. Project ì •ë³´ ê´€ë¦¬

Project íƒ­ì—ì„œ í”„ë¡œì íŠ¸ ë©”íƒ€ë°ì´í„°ì™€ ì„¤ì •ì„ ì¡°íšŒ/í¸ì§‘.

#### Project Info (ì½ê¸° ì „ìš©)
- **id**: í”„ë¡œì íŠ¸ ê³ ìœ  ì‹ë³„ì
- **name**: í”„ë¡œì íŠ¸ ì´ë¦„
- **status**: í”„ë¡œì íŠ¸ ìƒíƒœ (active, paused, completed)
- **created_at**: ìƒì„± ì¼ì‹œ

#### Context í¸ì§‘
í•„ìˆ˜ í•„ë“œì™€ ì‚¬ìš©ì ì •ì˜ í•„ë“œ ì§€ì›:
```typescript
interface Context {
  project_name: string;  // í•„ìˆ˜
  description: string;   // í•„ìˆ˜
  target_users?: string;
  deadline?: string;
  [key: string]: any;    // ì‚¬ìš©ì ì •ì˜ í•„ë“œ
}
```

**í¸ì§‘ ëª¨ë“œ:**
- ì¸ë¼ì¸ í¸ì§‘ (í•„ë“œ í´ë¦­ ì‹œ)
- í¼ ë‹¤ì´ì–¼ë¡œê·¸ (Edit ë²„íŠ¼ í´ë¦­ ì‹œ)
- í•„ìˆ˜ í•„ë“œ í‘œì‹œ (*)

#### Tech Stack í¸ì§‘
í•„ìˆ˜ í•„ë“œì™€ ì‚¬ìš©ì ì •ì˜ í•„ë“œ ì§€ì›:
```typescript
interface Tech {
  backend: string;   // í•„ìˆ˜
  frontend: string;  // í•„ìˆ˜
  database: string;  // í•„ìˆ˜
  [key: string]: any; // cache, deployment, etc.
}
```

**UI íŠ¹ì§•:**
- Key-Value ëª©ë¡ í˜•ì‹
- ìƒˆ í•„ë“œ ì¶”ê°€ ë²„íŠ¼ (+)
- í•„ë“œ ì‚­ì œ (íœ´ì§€í†µ ì•„ì´ì½˜)

#### Design Decisions í¸ì§‘
í•„ìˆ˜ í•„ë“œì™€ ì‚¬ìš©ì ì •ì˜ í•„ë“œ ì§€ì›:
```typescript
interface Design {
  architecture: string;  // í•„ìˆ˜
  auth_method: string;   // í•„ìˆ˜
  api_style: string;     // í•„ìˆ˜
  [key: string]: any;    // db_schema, rate_limiting, etc.
}
```

#### Execution Status (ì½ê¸° ì „ìš©)

Task ì‹¤í–‰ ì§„í–‰ ìƒí™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í‘œì‹œ. CLIì—ì„œ `clari project start` ì‹¤í–‰ ì‹œ DB ë³€ê²½ì„ pollingìœ¼ë¡œ ê°ì§€í•˜ì—¬ UI ê°±ì‹ .

```typescript
interface ExecutionStatus {
  total: number;      // ì „ì²´ Task ìˆ˜
  pending: number;    // ëŒ€ê¸° ì¤‘
  doing: number;      // ì‹¤í–‰ ì¤‘
  done: number;       // ì™„ë£Œ
  failed: number;     // ì‹¤íŒ¨
  progress: number;   // ì§„í–‰ë¥  (0-100)
}

interface RecentTask {
  id: number;
  title: string;
  status: 'pending' | 'doing' | 'done' | 'failed';
  result?: string;    // ì™„ë£Œ ì‹œ í•œì¤„í‰
  error?: string;     // ì‹¤íŒ¨ ì‹œ ì—ëŸ¬
}
```

**UI ìš”ì†Œ:**
- **Progress Bar**: ì‹œê°ì  ì§„í–‰ë¥  í‘œì‹œ
- **Status Indicator**: Running / Idle / Completed / Has Failures
- **Recent Tasks**: ìµœê·¼ 4-5ê°œ Task ë¡œê·¸
  - `âœ“` ì™„ë£Œ (ë…¹ìƒ‰)
  - `â—` ì‹¤í–‰ ì¤‘ (íŒŒë€ìƒ‰, ì• ë‹ˆë©”ì´ì…˜)
  - `âœ—` ì‹¤íŒ¨ (ë¹¨ê°„ìƒ‰)
  - `â—‹` ëŒ€ê¸° ì¤‘ (íšŒìƒ‰)

**ìƒíƒœ í‘œì‹œ:**
- **â— Running**: íŒŒë€ìƒ‰ - doing Taskê°€ ìˆìŒ
- **â— Idle**: íšŒìƒ‰ - ëŒ€ê¸° ì¤‘ (pendingë§Œ ìˆìŒ)
- **â— Completed**: ë…¹ìƒ‰ - ëª¨ë“  Task ì™„ë£Œ
- **â— Has Failures**: ë¹¨ê°„ìƒ‰ - ì‹¤íŒ¨í•œ Task ìˆìŒ

#### Project íƒ­ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
ProjectPanel/
â”œâ”€â”€ ProjectInfo.tsx        # ì½ê¸° ì „ìš© í”„ë¡œì íŠ¸ ê¸°ë³¸ ì •ë³´
â”œâ”€â”€ ContextSection.tsx     # Context í¸ì§‘ ì„¹ì…˜
â”œâ”€â”€ TechSection.tsx        # Tech Stack í¸ì§‘ ì„¹ì…˜
â”œâ”€â”€ DesignSection.tsx      # Design Decisions í¸ì§‘ ì„¹ì…˜
â”œâ”€â”€ ExecutionStatus.tsx    # ì‹¤í–‰ ìƒíƒœ ë° ì§„í–‰ë¥  í‘œì‹œ
â”œâ”€â”€ ProgressBar.tsx        # ì§„í–‰ë¥  ë°” ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ RecentTaskList.tsx     # ìµœê·¼ Task ë¡œê·¸ ëª©ë¡
â””â”€â”€ EditableField.tsx      # ê³µí†µ í•„ë“œ í¸ì§‘ ì»´í¬ë„ŒíŠ¸
```

#### ìƒíƒœ í‘œì‹œ
- **â— active**: ì´ˆë¡ìƒ‰ ì 
- **â— paused**: ë…¸ë€ìƒ‰ ì 
- **â— completed**: íŒŒë€ìƒ‰ ì 

---

### 1. Feature ê´€ë¦¬

- Feature ëª©ë¡ íŠ¸ë¦¬ ë·°
- Feature ì¶”ê°€/ì‚­ì œ/í¸ì§‘
- Feature ìŠ¤í™ (Markdown) í¸ì§‘
- FDL ì½”ë“œ í¸ì§‘ (ì½”ë“œ ì—ë””í„° ë‚´ì¥)

### 2. Task ê´€ë¦¬

- Task ë…¸ë“œ ì‹œê°í™”
- ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ Task ìƒì„±
- Task ìƒíƒœ í‘œì‹œ (ìƒ‰ìƒ êµ¬ë¶„)
  - `pending`: íšŒìƒ‰
  - `doing`: íŒŒë€ìƒ‰
  - `done`: ë…¹ìƒ‰
  - `failed`: ë¹¨ê°„ìƒ‰

### 3. Edge (ì˜ì¡´ì„±) ê´€ë¦¬

- ë…¸ë“œ ê°„ ë“œë˜ê·¸ë¡œ Edge ìƒì„±
- Edge í´ë¦­ìœ¼ë¡œ ì‚­ì œ
- ìˆœí™˜ ì˜ì¡´ì„± ê°ì§€ ë° ê²½ê³ 

### 4. ì‹¤ì‹œê°„ ë™ê¸°í™”

- CLI ë³€ê²½ ì‚¬í•­ ìë™ ë°˜ì˜
- ì¶©ëŒ ê°ì§€ ë° ì•Œë¦¼
- ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼

### 5. Context/Tech/Design í¸ì§‘

- JSON ì—ë””í„° ë˜ëŠ” í¼ ê¸°ë°˜ UI
- ìŠ¤í‚¤ë§ˆ ê²€ì¦

---

## SQLite ë™ê¸°í™” ì „ëµ

### WAL ëª¨ë“œ í™œì„±í™”

```sql
PRAGMA journal_mode=WAL;
PRAGMA busy_timeout=5000;
```

### Polling ë©”ì»¤ë‹ˆì¦˜

```typescript
// Extension Host
setInterval(async () => {
  const mtime = fs.statSync(dbPath).mtimeMs;
  if (mtime !== lastMtime) {
    lastMtime = mtime;
    const data = readDatabase();
    webview.postMessage({ type: 'sync', data });
  }
}, 1000);
```

### ì¶©ëŒ ë°©ì§€: ë‚™ê´€ì  ì ê¸ˆ

**ìŠ¤í‚¤ë§ˆ ë³€ê²½:**
```sql
ALTER TABLE tasks ADD COLUMN version INTEGER DEFAULT 1;
ALTER TABLE features ADD COLUMN version INTEGER DEFAULT 1;
```

**ì—…ë°ì´íŠ¸ ë¡œì§:**
```sql
UPDATE tasks
SET title = ?, status = ?, version = version + 1
WHERE id = ? AND version = ?;
-- affected_rows = 0 ì´ë©´ ì¶©ëŒ
```

**GUI ì²˜ë¦¬:**
```
ì €ì¥ ì‹¤íŒ¨ â†’ "ì™¸ë¶€ì—ì„œ ìˆ˜ì •ë¨" ë‹¤ì´ì–¼ë¡œê·¸
         â†’ [ìƒˆë¡œê³ ì¹¨] [ê°•ì œ ì €ì¥] [ì·¨ì†Œ]
```

---

## Extension êµ¬ì¡°

```
claritask-vscode/
â”œâ”€â”€ package.json              # Extension manifest
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ extension.ts          # Extension ì§„ì…ì 
â”‚   â”œâ”€â”€ CltEditorProvider.ts  # Custom Editor Provider
â”‚   â”œâ”€â”€ database.ts           # SQLite ì½ê¸°/ì“°ê¸°
â”‚   â”œâ”€â”€ sync.ts               # Polling ë¡œì§
â”‚   â””â”€â”€ expertWatcher.ts      # Expert íŒŒì¼ ê°ì‹œ ë° ë™ê¸°í™”
â”œâ”€â”€ webview-ui/
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ FeatureList.tsx      # Feature ëª©ë¡
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskPanel.tsx        # Task ê´€ë¦¬ íŒ¨ë„
â”‚   â”‚   â”‚   â”œâ”€â”€ StatusBar.tsx        # í•˜ë‹¨ ìƒíƒœ ë°”
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectPanel.tsx     # Project íƒ­ ë©”ì¸
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectInfo.tsx      # í”„ë¡œì íŠ¸ ê¸°ë³¸ ì •ë³´ (ì½ê¸° ì „ìš©)
â”‚   â”‚   â”‚   â”œâ”€â”€ ContextSection.tsx   # Context í¸ì§‘ ì„¹ì…˜
â”‚   â”‚   â”‚   â”œâ”€â”€ TechSection.tsx      # Tech Stack í¸ì§‘ ì„¹ì…˜
â”‚   â”‚   â”‚   â”œâ”€â”€ DesignSection.tsx    # Design Decisions í¸ì§‘ ì„¹ì…˜
â”‚   â”‚   â”‚   â”œâ”€â”€ ExecutionStatus.tsx  # ì‹¤í–‰ ìƒíƒœ í‘œì‹œ
â”‚   â”‚   â”‚   â”œâ”€â”€ ProgressBar.tsx      # ì§„í–‰ë¥  ë°”
â”‚   â”‚   â”‚   â”œâ”€â”€ RecentTaskList.tsx   # ìµœê·¼ Task ë¡œê·¸
â”‚   â”‚   â”‚   â”œâ”€â”€ EditableField.tsx    # Key-Value í¸ì§‘ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ SectionCard.tsx      # ì„¹ì…˜ ì¹´ë“œ ë˜í¼
â”‚   â”‚   â”‚   â”œâ”€â”€ ExpertsPanel.tsx     # Experts íƒ­ ë©”ì¸
â”‚   â”‚   â”‚   â”œâ”€â”€ ExpertCard.tsx       # Expert ì¹´ë“œ (ë Œë”ë§ + ë²„íŠ¼)
â”‚   â”‚   â”‚   â””â”€â”€ ExpertContent.tsx    # ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useSync.ts
â”‚   â”‚   â””â”€â”€ stores/
â”‚   â”‚       â””â”€â”€ store.ts
â”‚   â””â”€â”€ vite.config.ts
â””â”€â”€ README.md
```

---

## package.json (Extension Manifest)

```json
{
  "name": "claritask",
  "displayName": "Claritask",
  "description": "Visual editor for Claritask projects",
  "version": "0.1.0",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": ["Other"],
  "activationEvents": [],
  "main": "./out/extension.js",
  "contributes": {
    "customEditors": [
      {
        "viewType": "claritask.cltEditor",
        "displayName": "Claritask Editor",
        "selector": [
          {
            "filenamePattern": "*.clt"
          }
        ],
        "priority": "default"
      }
    ]
  }
}
```

---

## ë©”ì‹œì§€ í”„ë¡œí† ì½œ

### Extension â†’ Webview

```typescript
// ì „ì²´ ë°ì´í„° ë™ê¸°í™”
{ type: 'sync', data: ProjectData }

// ë¶€ë¶„ ì—…ë°ì´íŠ¸
{ type: 'update', table: 'tasks', id: 3, data: TaskData }

// ì¶©ëŒ ì•Œë¦¼
{ type: 'conflict', table: 'tasks', id: 3 }

// Context/Tech/Design ì €ì¥ ê²°ê³¼
{ type: 'settingSaveResult', section: 'context' | 'tech' | 'design', success: boolean, error?: string }
```

### Webview â†’ Extension

```typescript
// ë°ì´í„° ì €ì¥ ìš”ì²­
{ type: 'save', table: 'tasks', id: 3, data: TaskData, version: 5 }

// Edge ìƒì„±
{ type: 'addEdge', fromId: 2, toId: 1 }

// ìƒˆë¡œê³ ì¹¨ ìš”ì²­
{ type: 'refresh' }

// Context ì €ì¥
{ type: 'saveContext', data: ContextData }

// Tech ì €ì¥
{ type: 'saveTech', data: TechData }

// Design ì €ì¥
{ type: 'saveDesign', data: DesignData }
```

---

## ë°ì´í„° íƒ€ì…

```typescript
interface ProjectData {
  project: Project;
  features: Feature[];
  tasks: Task[];
  taskEdges: Edge[];
  featureEdges: Edge[];
  experts: Expert[];
  context: Record<string, any>;
  tech: Record<string, any>;
  design: Record<string, any>;
  state: Record<string, string>;
  memos: Memo[];
}

interface Expert {
  id: string;
  name: string;
  version: string;
  domain: string;
  language: string;
  framework: string;
  content: string;
  content_hash: string;
  assigned: boolean;
  fileExists: boolean;
}

interface Feature {
  id: number;
  name: string;
  spec: string;
  fdl: string;
  fdl_hash: string;
  status: string;
  version: number;
}

interface Task {
  id: number;
  feature_id: number;
  parent_id: number | null;
  title: string;
  content: string;
  level: string;
  skill: string;
  status: 'pending' | 'doing' | 'done' | 'failed';
  version: number;
}

interface Edge {
  from_id: number;
  to_id: number;
}
```

---

## ë¡œë“œë§µ

### Phase 1: MVP
- [x] Custom Editor Provider êµ¬í˜„
- [x] SQLite ì½ê¸° (sql.js)
- [x] React Webview ê¸°ë³¸ êµ¬ì¡°
- [x] Feature/Task íŠ¸ë¦¬ ë·°
- [x] 1ì´ˆ polling ë™ê¸°í™”
- [x] WAL ëª¨ë“œ í™œì„±í™”

### Phase 1.5: Project íƒ­
- [ ] Project íƒ­ UI êµ¬í˜„
- [ ] ProjectPanel ì»´í¬ë„ŒíŠ¸
- [ ] ProjectInfo (ì½ê¸° ì „ìš©) ì»´í¬ë„ŒíŠ¸
- [ ] ContextSection í¸ì§‘ ì»´í¬ë„ŒíŠ¸
- [ ] TechSection í¸ì§‘ ì»´í¬ë„ŒíŠ¸
- [ ] DesignSection í¸ì§‘ ì»´í¬ë„ŒíŠ¸
- [ ] ExecutionStatus ì»´í¬ë„ŒíŠ¸
  - [ ] ProgressBar (ì§„í–‰ë¥  ì‹œê°í™”)
  - [ ] RecentTaskList (ìµœê·¼ Task ë¡œê·¸)
  - [ ] ìƒíƒœ í‘œì‹œ (Running/Idle/Completed/Has Failures)
- [ ] Context/Tech/Design ì €ì¥ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬
- [ ] í•„ìˆ˜ í•„ë“œ ê²€ì¦ (required indicator)
- [ ] ì‚¬ìš©ì ì •ì˜ í•„ë“œ ì¶”ê°€/ì‚­ì œ

### Phase 2: Canvas
- [ ] React Flow í†µí•©
- [ ] Task ë…¸ë“œ ì‹œê°í™”
- [ ] ë“œë˜ê·¸ì•¤ë“œë¡­ Edge ìƒì„±
- [ ] ìƒíƒœë³„ ìƒ‰ìƒ í‘œì‹œ

### Phase 3: í¸ì§‘ ê¸°ëŠ¥
- [ ] Inspector íŒ¨ë„
- [ ] Task ì†ì„± í¸ì§‘
- [ ] Feature ìŠ¤í™ í¸ì§‘
- [ ] FDL ì½”ë“œ í¸ì§‘ê¸°

### Phase 4: Experts íƒ­
- [ ] ExpertsPanel ì»´í¬ë„ŒíŠ¸
- [ ] ExpertCard ì»´í¬ë„ŒíŠ¸ (ë§ˆí¬ë‹¤ìš´ ë Œë”ë§)
- [ ] react-markdown í†µí•©
- [ ] Expert íŒŒì¼ ì—´ê¸° ë©”ì‹œì§€ í•¸ë“¤ëŸ¬
- [ ] Assign/Unassign ê¸°ëŠ¥
- [ ] Create New Expert ë‹¤ì´ì–¼ë¡œê·¸
- [ ] FileSystemWatcher êµ¬í˜„
  - [ ] Expert íŒŒì¼ ë³€ê²½ ê°ì§€ â†’ DB ë°±ì—…
  - [ ] Expert íŒŒì¼ ì‚­ì œ ê°ì§€ â†’ ìë™ ë³µêµ¬
- [ ] activationEvents ì„¤ì •

### Phase 5: ë™ê¸°í™” ê°•í™”
- [ ] db.clt File watcher ì¶”ê°€
- [ ] ë‚™ê´€ì  ì ê¸ˆ êµ¬í˜„
- [ ] ì¶©ëŒ í•´ê²° UI

### Phase 6: Daemon (ì„ íƒ)
- [ ] clari daemon ëª…ë ¹ì–´
- [ ] WebSocket ì„œë²„
- [ ] ì‹¤ì‹œê°„ push ë™ê¸°í™”

---

## CLI í˜¸í™˜ì„±

### í™•ì¥ì ë³€ê²½ ë§ˆì´ê·¸ë ˆì´ì…˜

```bash
# ê¸°ì¡´ í”„ë¡œì íŠ¸ ë§ˆì´ê·¸ë ˆì´ì…˜
mv .claritask/db .claritask/db.clt
```

### clari CLI ìˆ˜ì • ì‚¬í•­

1. DB ê²½ë¡œ ë³€ê²½: `.claritask/db` â†’ `.claritask/db.clt`
2. WAL ëª¨ë“œ ê¸°ë³¸ í™œì„±í™”
3. version ì»¬ëŸ¼ ë§ˆì´ê·¸ë ˆì´ì…˜ ì¶”ê°€

---

## ì°¸ê³  ìë£Œ

- [VSCode Custom Editor API](https://code.visualstudio.com/api/extension-guides/custom-editors)
- [VSCode Webview UI Toolkit](https://github.com/microsoft/vscode-webview-ui-toolkit)
- [React Flow](https://reactflow.dev/)
- [better-sqlite3](https://github.com/WiseLibs/better-sqlite3)
- [SQLite WAL Mode](https://www.sqlite.org/wal.html)

---

*Claritask VSCode Extension Spec v1.3 - 2026-02-03*
